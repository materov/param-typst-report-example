---
# title: "–û—Ç—á–µ—Ç"
# subtitle: "–ü—Ä–∏–º–µ—Ä –¥–ª—è –ö–¶"
format: 
  typst: 
    template-partials: 
      - typst-show.typ
      - typst-template.typ
    # –ª–æ–≥–æ—Ç–∏–ø –Ω–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
    #logo: logo_light.png
lang: ru
author: "–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞"
params:
  species: Chinstrap

# –¥–∞—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–µ –≤ —Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è 
# –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ now
# https://pkg.garrickadenbuie.com/quarto-now/
#date: today
# **{{< meta params.species >}}**
---

–¢–µ–∫—Å—Ç —Å–æ–∑–¥–∞–Ω {{< modified "%d %B %Y" >}} –≥–æ–¥–∞. 

–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–π –≤–∏–¥: **`r params$species`**.

```{r}
#| echo: false
#| warning: false
#| fig-width: 8
#| fig-height: 4

# –∫–æ–ª–ª–µ–∫—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ tidyverse üì¶
library(tidyverse)

# –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
library(palmerpenguins)

gg_highlight <- 
penguins |> 
  #filter(species == "Adelie") |>
  na.omit() |>
  ggplot(aes(x = flipper_length_mm, 
             fill = species)) + 
  geom_bar() +
  silgelib::theme_roboto(base_size = 14) +
  ggsci::scale_fill_nejm(alpha = 0.9) +
  scale_x_continuous(name = "–†–∞–∑–º–∞—Ö –ø–ª–∞–≤–Ω–∏–∫–∞",
                     labels = function(x) str_c(x, " –º–º")) +
  labs(y = "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ", fill = "–≤–∏–¥") +
  theme(
    base_size = 13,
    axis.line = element_line(),
    panel.grid.major = element_line("grey95", 
                                    linewidth = 0.3),
    plot.margin = ggplot2::margin(t = 0.5,
                                  r = 0.5, 
                                  b = 0.5, 
                                  l = 0.5, "cm")
  )

library(gghighlight)

gg_highlight +
  gghighlight(species == params$species) +
  facet_wrap(~species)
```

```{r}
#| echo: false
#| warning: false
#| tbl-label: Penguins-tbl
#| tbl-cap: "–ü—Ä–∏–º–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ"
#| tbl-cap-location: top
# library(gt)
library(tinytable)
options(tinytable_latex_placement = "H")

penguins |> 
  #filter(species == "Adelie") |>
  na.omit() |>
  filter(species == params$species) |>
  mutate(body_mass = body_mass_g / 1000) |>
  rename("–≤–∏–¥" = species,
         "–¥–ª–∏–Ω–∞ –∫–ª—é–≤–∞, –º–º" = bill_length_mm,
         "—Ä–∞–∑–º–∞—Ö –∫—Ä—ã–ª–∞, –º–º" = flipper_length_mm,
         "–º–∞—Å—Å–∞, –∫–≥" = body_mass,
         "–ø–æ–ª" = sex) |>
  select(-year, -island, -bill_depth_mm, -body_mass_g) |>
  relocate(where(is.numeric), .before = last_col()) |>
  head(3) |> tt(width = c(1,1,1.5,1.5,1))  |>
  style_tt(fontsize = 0.9) 
  # style_tt(
  #   i = 1:3,
  #   j = 1,
  #   background = "teal",
  #   color = "white"
  # )
  # gt() |>
  # opt_table_font(font = "Times New Roman")
```

::: {.callout-warning title="–í–∞–∂–Ω–æ"}
–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ç–µ–∫—Å—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ.
:::

–¢–µ–∫—Å—Ç...

`r lorem::ipsum(paragraphs = 1, sentences = c(3))`





